<!DOCTYPE html>
<html lang="ja-JP">
<head>
  <meta charset="UTF-8">
  <link rel=stylesheet type="text/css" href="style.css">
  <script async src="opencv.js" type="text/javascript"></script>
</head>
<body>

<p>左の画像を半分に縮小します。</p>

<div>
  <img id="image" src="Lycoris.png"/>
  <canvas id="canvas" class="placeholder"></canvas>
</div>

<script>
  var Module = {
    onRuntimeInitialized: imgProc
  }

  function imgProc() {
    console.log(`OpenCV ready.`);
    let img = document.getElementById('image');
    let src = cv.imread(img);
    let dst = new cv.Mat();
    cv.resize(src, dst, new cv.Size(), 0.5, 0.5);                    // Size が未指定のときは係数 fx, fy が使われる。

    cv.imshow('canvas', dst);
    src.delete();
    dst.delete();
  }

</script>

</body>
</html>