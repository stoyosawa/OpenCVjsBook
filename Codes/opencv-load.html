<!DOCTYPE html>
<html lang="ja-JP">
<head>
  <meta charset="UTF-8">
  <link rel=stylesheet type="text/css" href="style.css">
  <script async id="scriptTag" src="libs/opencv.js"></script>
</head>
<body>

<h1>OpenCV.js ローディングのタイミング</h1>

<script>
  function showTime(message) {
    let datatype = undefined;
    try {
      datatype = cv.CV_8UC1;
    }
    catch {};
    console.log(`${message}: ${datatype} @ ${performance.now()}`);
  }
  showTime('Script started');

  let scriptElem = document.getElementById('scriptTag');
  scriptElem.addEventListener('load', function() {
    showTime('OpenCV loaded');
  });

  var Module = {
    onRuntimeInitialized: function() {
      showTime('OpenCV ready');
    }
  };
</script>

</body>
</html>