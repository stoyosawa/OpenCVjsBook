<!-- 仮題 -->
# Webページで画像処理～HTML5/JavaScriptとOpenCV.js

## はじめに

2024年1月  
豊沢 聡


### 注意事項

以下、本書で注意すべき点を説明します。

#### 実行環境

Web技術は基本的にブラウザやOSに依存しないので、開発・実行環境は問いません。新機能のなかにはブラウザ独自の仕様のものもありますが、それらは用いていません。

ただし、1点だけ、ビデオをフレーム単位で処理するメカニズムでブラウザ依存の仕様を使っています。具体的には、Firefoxでは`HTMLVideoElement.seekToNextFrame()`を、それ以外のブラウザでは`HTMLVideoElement.requestVideoFrameCallback()`をそれぞれ利用します。OpenCVでのビデオ処理はフレーム単位が基本なので、フレームに分解できなければ対応できないからです。詳細は[1.9節](./01-html5.md#19-ビデオをフレーム単位で取得する "INTERNAL")で説明します。[第7章](./07-video.md "INTERNAL")ではビデオを扱いますが、そこでは`HTMLVideoElement.requestVideoFrameCallback()`を使って実装しています。

センシティブな情報を頻繁に外部とやりとりするWeb環境では、セキュリティが一般的なアプリケーションより厳しくなっています。たとえば、ローカルに置かれたHTMLページと画像を処理するといった、はた目には無害な操作ですら、制約がかかっています。そのため、本書のコードはページ、画像、外部リソース（訓練データなど）はすべてWebサーバに置かれていると仮定しています（サーバはローカル運用でも、レンタルサーバでもかまいません）。ローカルファイルからでも実行できないわけではないですが、セキュリティ基準を下げる必要があります。これらについては[3.2節](./03-opencv.md#32-Cross-Originの問題を回避する "INTERNAL")で説明します。

#### サンプルスクリプト

本書のサンプルスクリプトは、出版社のダウンロードサービスからダウンロードできます。

ダウンロードサービスには、実行例で用いたサンプル画像・ビデオ、顔認識で用いた訓練済みモデルデータ、リンク付きの参考文献（[付録A](./A-References.md "INTERNAL"）、利用したOpenCV.jsの関数リスト（[付録C](./C-funvtions.md "INTERNAL")が含まれています。

サンプルスクリプトは目的を達成できる最小限で書かれています。例外にはほとんど対処しないので、エラー終了することもある点、ご了承ください。

#### 実行例

<!-- 未定 -->
本書そのものはモノクロ印刷なので、カラーを対象にした処理例もモノクロで表示されています。モノクロではニュアンスの取れない実行例の画面は、脇に示したQRコードから出版社サイトにアクセスすることで閲覧できるようになっています。ご利用ください。

実行例で用いた画像・ビデオは、筆者作成の一部を除いて、いずれもPixabayから取得したものです。
